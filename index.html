<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>LifeDashboard</title>
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css"
  />
  <style>
    /* ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰å…¨ä½“ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ */
    .dashboard {
      display: flex;
      height: 100vh;
    }
    .sidebar {
      width: 240px;
      border-right: 1px solid #ddd;
      background-color: #fff;
    }
    .content {
      flex: 1;
      overflow-y: auto;
      background-color: #f9f9f9;
    }
    /* ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¿ãƒ–ã®ä¸‹ç·š */
    .tabs.is-toggle li.is-active a {
      border-bottom-color: #3273dc;
      color: #3273dc;
    }
    /* Markdownãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®åŸºæœ¬ã‚¹ã‚¿ã‚¤ãƒ« */
    .markdown-rendered h1,
    .markdown-rendered h2,
    .markdown-rendered h3 {
      margin-top: 1em;
    }
    .markdown-rendered ul {
      margin-left: 1em;
    }
  </style>
</head>
<body>
  <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ -->
  <nav class="navbar is-light" role="navigation">
    <div class="navbar-brand">
      <a class="navbar-item" href="#">ğŸ“˜ LifeDashboard</a>
    </div>
  </nav>

  <div class="dashboard">
    <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
    <aside class="menu sidebar">
      <p class="menu-label">ãƒ¡ãƒ‹ãƒ¥ãƒ¼</p>
      <ul class="menu-list">
        <li><a class="is-active" data-target="dashboard">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</a></li>
        <li><a data-target="diary">æ—¥è¨˜</a></li>
        <li><a data-target="study">å‹‰å¼·</a></li>
        <li><a data-target="work">ä»•äº‹</a></li>
        <li><a data-target="schedule">äºˆå®š</a></li>
        <li><a data-target="settings">è¨­å®š</a></li>
      </ul>
    </aside>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <main class="content">
      <!-- Dashboard ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
      <section id="dashboard" class="section">
        <h2 class="title is-4">ğŸ  ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h2>
        <p>ã“ã“ã«å„ç¨®ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚„æ¦‚è¦ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚</p>
      </section>

      <!-- ãƒãƒ¼ãƒˆç³»ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼šæ—¥è¨˜ãƒ»å‹‰å¼·ãƒ»ä»•äº‹ãƒ»äºˆå®š -->
      <!-- å…±é€šã‚¯ãƒ©ã‚¹ note-section ã¨ data-category å±æ€§ã§åˆæœŸåŒ–ã‚’å…±é€šåŒ– -->
      <section id="diary" class="section is-hidden note-section" data-category="diary">
        <h2 class="title is-4">ğŸ“” æ—¥è¨˜</h2>
        <div class="tabs is-toggle is-fullwidth">
          <ul>
            <li class="is-active"><a data-action="write">å…¥åŠ›</a></li>
            <li><a data-action="preview">ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</a></li>
          </ul>
        </div>
        <div class="editor-pane">
          <textarea class="markdown-editor textarea" rows="12" placeholder="æ—¥è¨˜ã‚’Markdownã§æ›¸ã..."></textarea>
        </div>
        <div class="preview-pane box is-hidden">
          <div class="markdown-rendered"></div>
        </div>
      </section>

      <section id="study" class="section is-hidden note-section" data-category="study">
        <h2 class="title is-4">ğŸ“š å‹‰å¼·</h2>
        <div class="tabs is-toggle is-fullwidth">
          <ul>
            <li class="is-active"><a data-action="write">å…¥åŠ›</a></li>
            <li><a data-action="preview">ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</a></li>
          </ul>
        </div>
        <div class="editor-pane">
          <textarea class="markdown-editor textarea" rows="12" placeholder="å‹‰å¼·ãƒ¡ãƒ¢ã‚’Markdownã§..."></textarea>
        </div>
        <div class="preview-pane box is-hidden">
          <div class="markdown-rendered"></div>
        </div>
      </section>

      <section id="work" class="section is-hidden note-section" data-category="work">
        <h2 class="title is-4">ğŸ’¼ ä»•äº‹</h2>
        <div class="tabs is-toggle is-fullwidth">
          <ul>
            <li class="is-active"><a data-action="write">å…¥åŠ›</a></li>
            <li><a data-action="preview">ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</a></li>
          </ul>
        </div>
        <div class="editor-pane">
          <textarea class="markdown-editor textarea" rows="12" placeholder="ä»•äº‹ã®ã‚¿ã‚¹ã‚¯ã‚„ãƒ­ã‚°ã‚’..."></textarea>
        </div>
        <div class="preview-pane box is-hidden">
          <div class="markdown-rendered"></div>
        </div>
      </section>

      <section id="schedule" class="section is-hidden note-section" data-category="schedule">
        <h2 class="title is-4">ğŸ“… äºˆå®š</h2>
        <div class="tabs is-toggle is-fullwidth">
          <ul>
            <li class="is-active"><a data-action="write">å…¥åŠ›</a></li>
            <li><a data-action="preview">ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</a></li>
          </ul>
        </div>
        <div class="editor-pane">
          <textarea class="markdown-editor textarea" rows="12" placeholder="äºˆå®šã‚„ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’..."></textarea>
        </div>
        <div class="preview-pane box is-hidden">
          <div class="markdown-rendered"></div>
        </div>
      </section>

      <!-- è¨­å®šã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
      <section id="settings" class="section is-hidden">
        <h2 class="title is-4">âš™ï¸ è¨­å®š</h2>
        <p>è¨­å®šé …ç›®ã‚’ã“ã“ã«è¿½åŠ ã—ã¾ã™ã€‚</p>
      </section>
    </main>
  </div>

  <!-- marked.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script>
    // ã‚µã‚¤ãƒ‰ãƒãƒ¼åˆ‡ã‚Šæ›¿ãˆ
    document.querySelectorAll('.menu-list a').forEach(link => {
      link.addEventListener('click', () => {
        document.querySelectorAll('.menu-list a').forEach(el => el.classList.remove('is-active'));
        link.classList.add('is-active');
        const tgt = link.dataset.target;
        document.querySelectorAll('main .section').forEach(sec => sec.classList.add('is-hidden'));
        document.getElementById(tgt).classList.remove('is-hidden');
        localStorage.setItem('lifeDashboardSection', tgt);
      });
    });

    // ãƒãƒ¼ãƒˆç³»ï¼ˆå…±é€šãƒ­ã‚¸ãƒƒã‚¯ï¼‰
    document.querySelectorAll('.note-section').forEach(sec => {
      const category = sec.dataset.category;
      const tabs = sec.querySelectorAll('.tabs ul li');
      const writeTab = tabs[0], previewTab = tabs[1];
      const editorPane = sec.querySelector('.editor-pane');
      const previewPane = sec.querySelector('.preview-pane');
      const editor = sec.querySelector('.markdown-editor');
      const rendered = sec.querySelector('.markdown-rendered');

      // ã‚¿ãƒ–ã‚¯ãƒªãƒƒã‚¯
      writeTab.addEventListener('click', () => {
        writeTab.classList.add('is-active');
        previewTab.classList.remove('is-active');
        editorPane.classList.remove('is-hidden');
        previewPane.classList.add('is-hidden');
      });
      previewTab.addEventListener('click', () => {
        previewTab.classList.add('is-active');
        writeTab.classList.remove('is-active');
        editorPane.classList.add('is-hidden');
        previewPane.classList.remove('is-hidden');
        rendered.innerHTML = marked.parse(editor.value);
      });

      // è‡ªå‹•ä¿å­˜ï¼†ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼åŒæœŸ
      editor.addEventListener('input', () => {
        localStorage.setItem(`lifeDashboardNote-${category}`, editor.value);
        if (!previewPane.classList.contains('is-hidden')) {
          rendered.innerHTML = marked.parse(editor.value);
        }
      });

      // åˆæœŸãƒ­ãƒ¼ãƒ‰æ™‚ã®å¾©å…ƒ
      const saved = localStorage.getItem(`lifeDashboardNote-${category}`);
      if (saved) editor.value = saved;
    });

    // èµ·å‹•æ™‚ã«æœ€å¾Œã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å¾©å…ƒ
    window.addEventListener('DOMContentLoaded', () => {
      const last = localStorage.getItem('lifeDashboardSection');
      if (last) {
        const link = document.querySelector(`.menu-list a[data-target="${last}"]`);
        if (link) link.click();
      }
    });
  </script>
</body>
</html>
